<div class="artist-list-container">
  <div class="container">
    <div class="page-header">
      <h1>{{ parlorId ? 'Artists at ' + parlorName : 'Tattoo Artists Directory' }}</h1>
      <p *ngIf="!parlorId">Discover talented tattoo artists from around the world</p>
    </div>

    <!-- Filter Section -->
    <app-search-filter 
      *ngIf="!parlorId"
      [showSpecialtyFilter]="true"
      [showTravelFilter]="true"
      (filterChange)="onFilterChange($event)">
    </app-search-filter>

    <!-- Sponsored Artists -->
    <div *ngIf="!parlorId && sponsoredArtists.length > 0" class="sponsored-section">
      <h2>Sponsored Artists</h2>
      <div class="sponsored-grid">
        <div *ngFor="let artist of sponsoredArtists" class="artist-card sponsored">
          <mat-card [routerLink]="['/artists', artist.id]" class="clickable-card">
            <div class="card-image-container">
              <img mat-card-image [src]="artist.profileImage || 'https://images.unsplash.com/photo-1605647533135-51b5906087d0'" 
                  alt="{{artist.name}}" class="card-image">
              <div class="sponsored-badge">Sponsored</div>
            </div>
            <mat-card-content>
              <h3>{{artist.name}}</h3>
              <p class="specialties">
                <span *ngFor="let specialty of artist.specialty | slice:0:2; let last = last">
                  {{specialty}}{{!last ? ', ' : ''}}
                </span>
                <span *ngIf="artist.specialty.length > 2">...</span>
              </p>
              <p class="location">
                <mat-icon>location_on</mat-icon>
                {{artist.location.city}}, {{artist.location.state}}
              </p>
              <div class="rating">
                <mat-icon>star</mat-icon>
                <span>{{artist.rating | number:'1.1-1'}}</span>
              </div>
              <div *ngIf="artist.travelWilling" class="travel-badge">
                <mat-icon>flight</mat-icon> Willing to travel
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>

    <!-- Artists List -->
    <div class="artists-section">
      <h2>{{ parlorId ? 'All Artists at ' + parlorName : 'All Tattoo Artists' }}</h2>

      <div *ngIf="loading" class="loading-container">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Loading artists...</p>
      </div>

      <div *ngIf="error" class="error-container">
        <mat-icon color="warn">error</mat-icon>
        <p>Failed to load artists. Please try again later.</p>
      </div>

      <div *ngIf="!loading && !error && artists.length === 0" class="empty-container">
        <mat-icon>info</mat-icon>
        <p *ngIf="parlorId">There are no artists associated with this parlor.</p>
        <p *ngIf="!parlorId">No artists found matching your criteria. Try adjusting your filters.</p>
      </div>

      <div *ngIf="!loading && !error && artists.length > 0" class="artists-grid">
        <div *ngFor="let artist of artists" class="artist-card">
          <mat-card [routerLink]="['/artists', artist.id]" class="clickable-card">
            <div class="card-image-container">
              <img mat-card-image [src]="artist.profileImage || 'https://images.unsplash.com/photo-1482329033286-79a3d24413b4'" 
                  alt="{{artist.name}}" class="card-image">
              <div *ngIf="artist.featured" class="featured-badge">Featured</div>
            </div>
            <mat-card-content>
              <h3>{{artist.name}}</h3>
              <p class="specialties">
                <span *ngFor="let specialty of artist.specialty | slice:0:2; let last = last">
                  {{specialty}}{{!last ? ', ' : ''}}
                </span>
                <span *ngIf="artist.specialty.length > 2">...</span>
              </p>
              <p class="location">
                <mat-icon>location_on</mat-icon>
                {{artist.location.city}}, {{artist.location.state}}
              </p>
              <div class="rating">
                <mat-icon>star</mat-icon>
                <span>{{artist.rating | number:'1.1-1'}}</span>
              </div>
              <div *ngIf="artist.travelWilling" class="travel-badge">
                <mat-icon>flight</mat-icon> Willing to travel
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

      <!-- Pagination -->
      <mat-paginator
        *ngIf="!loading && !error && totalArtists > pageSize && !parlorId"
        [length]="totalArtists"
        [pageSize]="pageSize"
        [pageSizeOptions]="[12, 24, 36]"
        [pageIndex]="currentPage"
        (page)="handlePageEvent($event)"
        aria-label="Select page">
      </mat-paginator>
    </div>
  </div>
</div>
