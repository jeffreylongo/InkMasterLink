<div class="instagram-feed-container">
  <div class="instagram-header">
    <h3 class="instagram-title">
      <mat-icon>photo_camera</mat-icon>
      Instagram Feed
    </h3>
    <a *ngIf="media.length > 0" href="{{media[0]?.permalink}}" target="_blank" class="instagram-link">
      <span>View on Instagram</span>
      <mat-icon>open_in_new</mat-icon>
    </a>
  </div>
  
  <!-- Loading state -->
  <div *ngIf="loading" class="loading-state">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Loading Instagram feed...</p>
  </div>
  
  <!-- Error state -->
  <div *ngIf="error && !loading" class="error-state">
    <mat-icon color="warn">error_outline</mat-icon>
    <p>{{ error }}</p>
  </div>
  
  <!-- Empty state -->
  <div *ngIf="!loading && !error && media.length === 0" class="empty-state">
    <mat-icon>photo_library</mat-icon>
    <p>No Instagram posts available</p>
  </div>
  
  <!-- Instagram feed grid -->
  <div *ngIf="!loading && !error && media.length > 0" class="instagram-grid">
    <a *ngFor="let item of media" 
       [href]="item.permalink" 
       target="_blank" 
       class="instagram-item"
       [ngClass]="item.media_type.toLowerCase()">
      
      <!-- Display image or video thumbnail -->
      <img [src]="item.thumbnail_url || item.media_url" 
           [alt]="item.caption || 'Instagram post'"
           class="instagram-media">
      
      <!-- Show play icon for videos -->
      <mat-icon *ngIf="item.media_type === 'VIDEO'" class="play-icon">play_circle_filled</mat-icon>
      
      <!-- Show carousel icon for albums -->
      <mat-icon *ngIf="item.media_type === 'CAROUSEL_ALBUM'" class="carousel-icon">collections</mat-icon>
      
      <!-- Overlay with caption and like -->
      <div class="instagram-overlay">
        <p *ngIf="item.caption" class="instagram-caption">
          {{ (item.caption.length > 60) ? (item.caption | slice:0:60) + '...' : item.caption }}
        </p>
        <span class="instagram-time">{{ item.timestamp | date:'mediumDate' }}</span>
      </div>
    </a>
  </div>
</div>